RICK Agent Handoff Prompts – 841921
===================================

Use these in order with a new agent after opening the correct project root (e.g., `N_RLC_rebuild`) in a fresh VS Code window.

---

PROMPT 1 – Identity, files to read, and governance
--------------------------------------------------

You are my RICK project coding agent.

The folder opened in this VS Code window is the active RICK clean live project for THIS environment (it may be a clean clone, e.g. N_RLC_rebuild).

Your first task:

1. Open and fully read `AGENT_HANDOFF_841921.md` at the project root.
2. Open and fully read `MEGA_PROMPT_TRANSFER.md` at the project root.
3. Summarize back to me:
   - The folder path you see as the project root.
   - The core safety rules (PIN 841921, RickCharter, guardian gates, R:R ≥ 3.2, broker constraints).
   - The mining rules for local RICK folders and GitHub/remote repos.
   - The environment/clone addendum (single write-target per project root, bad environment limitations must NOT be treated as design).

---

PROMPT 2 – Approval, mining rules, and environment constraints
-------------------------------------------------------------

approved 841921

Apply the following rules exactly:

- Treat THIS folder as the ONLY write target for this instance.
- All other RICK folders under `/home/ing/RICK` and all GitHub/remote repos are READ-ONLY mining sources.
- You may mine:
  - Local legacy RICK repos (R_H_UNI, RICK_LIVE_CLEAN, etc.).
  - Any GitHub/remote repos I grant access to.

You MUST:
- Keep PIN 841921, RickCharter, guardian gates, and R:R ≥ 3.2 exactly as written.
- Keep Oanda practice and IBKR paper as the only paper brokers; Coinbase paper stays disabled.
- Only create/edit/delete files INSIDE this project root.
- Never modify or delete files in other RICK roots or remote repos.
- Never encode the previous environment’s Git/GPG/gh limitations as design constraints; treat those as defects of that old environment only.
- Respect the Operator vs Agent responsibilities:
  - I provide intent and approvals.
  - You implement changes directly using your tools, instead of giving me step-by-step coding or shell instructions as your primary response.

---

PROMPT 3 – Core unfinished work to complete (from MEGA_PROMPT_TRANSFER)
-----------------------------------------------------------------------

Using `AGENT_HANDOFF_841921.md` and `MEGA_PROMPT_TRANSFER.md` as your source of truth, your job in THIS environment is to COMPLETE the open tasks listed there. Concretely, I want you to:

1. Broker execution alignment:
   - Inspect the current Oanda practice and IBKR paper connector implementations available in this environment and any mined legacy/GitHub sources.
   - Update `execution/order_router.py` so it calls the correct execution methods with the correct parameters.
   - Ensure small paper trades from this project route successfully and register in `position_manager`, keeping Coinbase paper disabled.

2. Autonomous candidate generation:
   - Implement `_generate_candidates()` in `orchestration/autonomous_controller.py`.
   - Wire it into existing strategies, hive logic, ML/AI components, and wolf packs in this project, and use mined legacy code where appropriate.
   - Ensure each candidate includes broker, symbol, direction, size, entry price, stop-loss, and take-profit, and passes charter + guardian gates + hedge/quant rules + R:R ≥ 3.2 BEFORE calling `place_trade`.

3. End-to-end paper trade via CLI:
   - Make `rick_cli.py` + `config/operator_task_config.json` able to:
     - Enter a manual Oanda/IBKR paper trade.
     - Route it through `order_router` and the right connector.
     - Register it in `position_manager`.
     - Produce clear narration entries in the narration log (e.g., `logs/narration.log`).

4. Autonomous mode behavioral validation:
   - Make the autonomous loop start/stop from the operator console.
   - Confirm heartbeats, candidate evaluations, trade approvals/rejections, and position management actions are all clearly narrated.
   - Confirm manual trades and autonomous mode coexist safely.

5. Mining from local and GitHub repos:
   - Aggressively mine any local RICK repos and any GitHub repos I provide, as read-only sources, to accelerate the work above.
   - Copy/adapt logic only into THIS project root, with comments noting original paths for auditability.

Work directly on the code and configs here using your tools. Do NOT rely on me to manually implement your changes as your primary mechanism. If you are blocked by missing access (e.g. to a legacy folder or GitHub repo), state precisely what you need (paths or repo URLs) and I’ll provide them.

---

PROMPT 3B – Advanced abilities integration (no shell hand-offs)
----------------------------------------------------------------

You are NOT allowed to treat me (the human operator) as a “command runner.” You MUST, as much as this environment allows, do the work directly using your tools instead of handing me shell scripts or long command lists as your primary response.

Your job in THIS environment is to:

1. Discover and catalog advanced abilities directly in the codebase
    Without asking me to run shell commands, use your own file tools to:
    - Enumerate and summarize all “advanced abilities” and features across:
       - `foundation/`, `hive/`, `logic/`, `wolf_packs/`, `orchestration/`, `brokers/`, `util/`, `dashboard/`, and capital/risk modules.
    - For each ability/feature you find (e.g., guardian gates, crypto entry gates, wolf packs, hedge logic, swarm, portfolio optimizer, regime detector, canary/live engines, installer patches, etc.):
       - Record: name, file path, core purpose in plain English, and which parts of the trading loop it affects (entry, sizing, hedge, trail, close, monitoring, logging).

2. Map abilities to real behaviors, not just code
    For each advanced ability you identify, you MUST explicitly answer:
    - What observable behavior should this produce in live or paper trading?
       (Example: “Guardian gates” → block trades that exceed 35% margin or violate correlation rules; “crypto_entry_gate_system” → only allow crypto trades when hive consensus ≥ 90%.)
    - How is that behavior currently triggered in RICK_LIVE_CLEAN or `new_RLC_rebuild`?
       (e.g., called from `aggressive_money_machine.py`, `wolf_packs/orchestrator.py`, `validate_all()` in `guardian_gates`, etc.)
    - Where exactly in the autonomous loop or manual path the ability should run:
       - Before candidate creation,
       - During candidate validation,
       - Before order placement,
       - During monitoring/hedging/trailing,
       - Or in logging/telemetry only.

3. Convert diff-style guidance into direct integration work
    Instead of giving me command lists like “run Command 1–9,” you MUST:
    - Use your file-read and diff reasoning capabilities to compare:
       - `foundation/rick_charter.py` vs any `autonomous_charter` or enhanced charter modules.
       - Old vs new versions of:
          - `foundation/margin_correlation_gate.py`
          - `hive/crypto_entry_gate_system.py`
          - `logic/portfolio_optimizer.py` or similar
          - `hive/hive_mind_processor.py`
          - `brokers/oanda_connector.py` vs any enhanced OANDA connectors
          - Any `coinbase_advanced_connector` or ML/“hive bus” logic.
    - Classify each enhancement into:
       - Safe ADD – entirely new module or function; can be added directly to this project root and wired into the loop.
       - Selective MERGE – improved version of an existing file; you must merge the improvements while preserving PIN 841921, R:R ≥ 3.2, and all charter/gate limits.
       - Optional EXPERIMENTAL – ML/adaptive/extra analytics that must not weaken safety; may be wired in only as advisory signals, not as overrides to charter or gates.

    You then MUST propose and, where permitted, APPLY concrete file-level changes inside THIS project root:
    - New files for Safe ADD abilities.
    - Edits to orchestration/controller/wolf pack routing/broker connectors to actually call those abilities.
    - Updates to the autonomous loop so that these features RUN on each 60-second cycle (or appropriate cadence), instead of just existing in code.

4. Tie advanced abilities into the autonomous loop and CLI behavior
    Treat the “Aggressive Money Machine” / autonomous loop description as the target real behavior. For each advanced ability, make sure:

    - It participates in the decision tree and autonomous execution loop as described in the system snapshot (regime detection → wolf pack selection → hedge analysis → guardian gates → sizing → OCO placement → monitoring → autonomous actions → narration).
    - For manual trades entered via `rick_cli.py`:
       - The same charter, guardian gates, hedge logic, and R:R ≥ 3.2 requirements apply.
       - Advanced features (e.g., hedging, dynamic sizing, enhanced trailing) are applied consistently, so that manual trades are treated like autonomous trades after entry.

    You MUST ensure that, once your changes are in place, I can see evidence of each advanced ability in the narration/logs in plain English (e.g., “GATE_FAILED_CORRELATION”, “CRYPTO_GATE_REJECTED”, “HEDGE_SHORT_ACTIVATED”, “PORTFOLIO_OPTIMIZER_REDUCED_EXPOSURE”, “PACK_ROUTED_BULLISH_WOLF_PACK”).

5. Produce an “Advanced Abilities Manifest” inside the repo
    Create or update a single markdown file (for example, `ADVANCED_ABILITIES_MANIFEST_841921.md` in the project root) that contains:

    - A numbered list of all advanced abilities (target: encompass the “130+” abilities) with:
       - Name
       - File(s) involved
       - Where they are called from (which orchestrator/loop/CLI path)
       - What real behavior they enforce or enable
       - Any dependencies (e.g., needs OANDA practice, needs crypto enabled, needs dashboard).
    - A short section titled “HOW TO SEE THIS WORKING (NO CODE)” with:
       - The CLI commands or menu options I should use.
       - The log lines or dashboard panels I should watch.
       - Any safety limits or thresholds this ability guarantees (e.g., margin, R:R, max concurrent trades, crypto consensus).

    This manifest MUST be written in clear, plain English, assuming I do not code.

6. Verification without asking me to run a giant command list
    When you are ready to verify, you MAY:

    - Ask me to run a very small number of simple commands (e.g. “Run `python3 validate_system.py`” or “Run the CLI and choose option X”), but these should be:
       - Minimal.
       - Necessary for me to visually confirm behavior.
       - Clearly explained (what I should expect to see).

    Your primary verification work MUST use:
    - Your internal reasoning about how the code paths are wired.
    - Existing health checks/test harnesses already in this repo (if you can run them).
    - Logging/narration integrations you have added.

    You MUST NOT simply dump long shell sequences and tell me “run all of this and paste the outputs” as your main approach.

---

PROMPT 4 – Optional final verification checklist
-----------------------------------------------

When you believe the core tasks above are complete, do all of the following and report the results:

1. Run the project’s health check entrypoint (using `validate_system.py` or the documented health-check wrapper) and summarize the status of all checks:
   - PIN
   - Imports
   - Router/trade
   - Narration
   - Any others you added

2. Execute a very small Oanda practice OR IBKR paper test trade via `rick_cli.py`:
   - Confirm:
     - PIN validation and charter/gate checks.
     - Router behavior and connector call.
     - Position registration in `position_manager`.
     - Narration entries written to the narration log.

3. Start autonomous mode from the operator console briefly and confirm:
   - Heartbeats and candidate evaluations are logged.
   - Any trades it places follow all charter/gate/R:R rules.
   - Manual trade entry remains functional while the loop is running.

Summarize:
- What you ran.
- What passed.
- What failed or remains open, if anything.
- Any recommendations for further hardening.

---

APPENDIX – Standard response when N_RLC_rebuild/RICK are not in the workspace
-----------------------------------------------------------------------------

If you are an agent running in a workspace that only includes another RICK repo (for example, `RICK_LIVE_CLEAN`) and you do NOT yet see:

- `/home/ing/RICK/N_RLC_rebuild`
- `/home/ing/RICK/new_RLC_rebuild`
- `/home/ing/RICK/AGENT_HANDOFF_841921.md`
- `/home/ing/RICK/MEGA_PROMPT_TRANSFER.md`
- `/home/ing/RICK/zip_main_transfer.zip`

then you MUST respond to the operator with something equivalent to the following, instead of guessing paths or doing nothing:

"""
From my context, my active root right now is a different RICK repo (for example, `/home/ing/RICK/RICK_LIVE_CLEAN`). I do NOT currently see the canonical rebuild folder or its clean clone:

- `/home/ing/RICK/new_RLC_rebuild`
- `/home/ing/RICK/N_RLC_rebuild`
- `AGENT_HANDOFF_841921.md`
- `MEGA_PROMPT_TRANSFER.md`
- `zip_main_transfer.zip`

Because those paths are not part of this VS Code workspace, I cannot mine from `new_RLC_rebuild` or write into `N_RLC_rebuild` yet.

To proceed under PIN 841921 and the governance you described, I need you to:

1. Add the clean clone folder as a read-write root in this workspace:
   - `/home/ing/RICK/N_RLC_rebuild`

2. Add the main `RICK` folder as a read-only mining root so I can see the rebuild, the transfer zip, and handoff docs:
   - `/home/ing/RICK`

Once those roots are added, please tell me:

"N_RLC_rebuild and RICK are now in the workspace; continue."

After that, I will:

- Open and fully read `AGENT_HANDOFF_841921.md` and `MEGA_PROMPT_TRANSFER.md` from their real locations.
- Confirm that I am treating `/home/ing/RICK/N_RLC_rebuild` as the active project root.
- Confirm my understanding of PIN 841921, the charter, guardian gates, R:R ≥ 3.2, and read-only mining rules.
- Then begin wiring the order router, autonomous controller, CLI, and position manager exactly as specified in those documents.
"""

This appendix must be preserved so that any agent who finds itself in the wrong root (e.g. only seeing `RICK_LIVE_CLEAN`) will ask the operator to add `N_RLC_rebuild` and the main `RICK` folder to the workspace before proceeding.
